ì„±ëŠ¥ ì¶”ì , ë¶€ìƒ ë°©ì§€, í›ˆë ¨ ê³„íš ìµœì í™”ë¥¼ ìœ„í•œ ë°ì´í„° ê¸°ë°˜ ëŸ¬ë‹ ëŒ€ì‹œë³´ë“œ. Next.js 14+ì™€ Strava APIë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

-   **ì‹¤ì‹œê°„ í›ˆë ¨ ì§€í‘œ**: ì£¼ê°„ ì£¼í–‰ ê±°ë¦¬, í›ˆë ¨ ë¶€í•˜, ì„±ëŠ¥ ì¶”ì 
-   **ë¶€ìƒ ë°©ì§€**: ACWR (ê¸‰ì„±:ë§Œì„± ì‘ì—…ë¶€í•˜ ë¹„ìœ¨) ëª¨ë‹ˆí„°ë§
-   **ì„±ëŠ¥ ë¶„ì„**: VDOT ê¸°ë°˜ í›ˆë ¨ ì†ë„ ë° ë ˆì´ìŠ¤ ì˜ˆì¸¡
-   **í›ˆë ¨ ìº˜ë¦°ë”**: ê³„íš ëŒ€ë¹„ ì‹¤ì œ ìš´ë™ ì¶”ì 
-   **1ì¸ ì „ìš©**: ì•ˆì „í•œ í† í° ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ ê°œì¸ ë§ì¶¤í˜• ëŒ€ì‹œë³´ë“œ

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ì¡°ê±´

-   Node.js 18 ì´ìƒ
-   npm, yarn, pnpm ë˜ëŠ” bun
-   Strava ê°œë°œì ê³„ì •

### ì„¤ì¹˜ ë°©ë²•

1. ì €ì¥ì†Œ í´ë¡ 
2. ì˜ì¡´ì„± ì„¤ì¹˜:

```bash
npm install
# ë˜ëŠ”
yarn install
# ë˜ëŠ”
pnpm install
# ë˜ëŠ”
bun install
```

3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`.env.local` íŒŒì¼ ìƒì„±):

```env
STRAVA_CLIENT_ID=your_client_id
STRAVA_CLIENT_SECRET=your_client_secret
STRAVA_REFRESH_TOKEN=your_refresh_token
```

4. ê°œë°œ ì„œë²„ ì‹¤í–‰:

```bash
npm run dev
# ë˜ëŠ”
yarn dev
# ë˜ëŠ”
pnpm dev
# ë˜ëŠ”
bun dev
```

5. ë¸Œë¼ìš°ì €ì—ì„œ [http://localhost:3000](http://localhost:3000) ì—´ê¸°

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

-   **í”„ë ˆì„ì›Œí¬**: Next.js 14+ (App Router)
-   **ì–¸ì–´**: TypeScript
-   **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS, shadcn/ui
-   **ë°ì´í„° í˜ì¹­**: SWR/React Query
-   **ì‹œê°í™”**: Recharts
-   **ë°°í¬**: Vercel
-   **ë°ì´í„° ì†ŒìŠ¤**: Strava API v3

## ğŸ“Š í•µì‹¬ ì§€í‘œ

### ACWR (ê¸‰ì„±:ë§Œì„± ì‘ì—…ë¶€í•˜ ë¹„ìœ¨)

-   **ê¸‰ì„± ë¶€í•˜**: ìµœê·¼ 7ì¼ê°„ ì£¼í–‰ ê±°ë¦¬ í•©ê³„
-   **ë§Œì„± ë¶€í•˜**: (ìµœê·¼ 28ì¼ê°„ ì£¼í–‰ ê±°ë¦¬ í•©ê³„) / 4
-   **ë¹„ìœ¨**: ê¸‰ì„± / ë§Œì„±
    -   ğŸŸ¢ 0.8-1.3: ìµœì 
    -   ğŸŸ¡ 1.3-1.5: ì£¼ì˜ í•„ìš”
    -   ğŸ”´ >1.5: ë¶€ìƒ ìœ„í—˜ ë†’ìŒ

### VDOT ê³„ì‚°ê¸°

-   ìµœê·¼ ìµœê³  ê¸°ë¡ì„ ê¸°ë°˜ìœ¼ë¡œ ì²´ë ¥ ìˆ˜ì¤€ ìë™ ê³„ì‚°
-   ê°œì¸ ë§ì¶¤í˜• í›ˆë ¨ ì†ë„ ì œê³µ
-   Riegel ê³µì‹ì„ ì‚¬ìš©í•œ ë ˆì´ìŠ¤ ì˜ˆìƒ ì‹œê°„ ê³„ì‚°

### TRIMP (í›ˆë ¨ ìê·¹)

-   ì‹¬ë°•ìˆ˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ í›ˆë ¨ ë¶€í•˜ ì •ëŸ‰í™”
-   í›ˆë ¨ ê°•ë„ì™€ íšŒë³µ ê· í˜• ì¡°ì • ì§€ì›

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
/app
  /api/strava        # Strava API ì—”ë“œí¬ì¸íŠ¸
  /components        # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
  /lib               # í•µì‹¬ ë¡œì§ê³¼ ìœ í‹¸ë¦¬í‹°
  /public            # ì •ì  ìì‚°
  /styles            # ì „ì—­ ìŠ¤íƒ€ì¼
  page.tsx           # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
```

## ğŸ“… ê°œë°œ ë¡œë“œë§µ

### 1ë‹¨ê³„: í•µì‹¬ ê¸°ëŠ¥

-   [ ] Strava OAuth ì—°ë™
-   [ ] ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ
-   [ ] ì£¼ê°„ ì£¼í–‰ ê±°ë¦¬ ì¶”ì 
-   [ ] ACWR ê³„ì‚° ë° ì‹œê°í™”

### 2ë‹¨ê³„: ì„±ëŠ¥ ë¶„ì„

-   [ ] VDOT ê³„ì‚°ê¸°
-   [ ] í›ˆë ¨ ì†ë„ ì¶”ì²œ
-   [ ] ë ˆì´ìŠ¤ ì˜ˆìƒ ì‹œê°„

### 3ë‹¨ê³„: í›ˆë ¨ ê³„íš

-   [ ] ëŒ€í™”í˜• í›ˆë ¨ ìº˜ë¦°ë”
-   [ ] ê³„íš ëŒ€ë¹„ ì‹¤ì  ë¹„êµ
-   [ ] TRIMP ê¸°ë°˜ ë¶€í•˜ ì¶”ì 

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ™ ê°ì‚¬ì˜ ë§

-   í¬ê´„ì ì¸ APIë¥¼ ì œê³µí•´ ì£¼ì‹  Stravaì— ê°ì‚¬ë“œë¦½ë‹ˆë‹¤
-   VDOT ë°©ë²•ë¡ ì„ ê°œë°œí•´ ì£¼ì‹  Jack Daniels ë°•ì‚¬ë‹˜ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤
-   ì˜ê°ê³¼ í”¼ë“œë°±ì„ ì£¼ì‹  ëŸ¬ë‹ ì»¤ë®¤ë‹ˆí‹° ì—¬ëŸ¬ë¶„ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤

## 1. ê°œìš”

-   **í”„ë¡œì íŠ¸ëª…**: Personal Running Lab (PRL)
-   **ëª©ì **: Strava ìœ ë£Œ êµ¬ë… ê¸°ëŠ¥ì„ ëŒ€ì²´í•˜ê³ , ëŸ¬ë„ˆì˜ ì„±ì¥ì— í•„ìˆ˜ì ì¸ í›ˆë ¨ ì§€í‘œ(VDOT, ACWR, TRIMP)ë¥¼ ì œê³µí•˜ëŠ” **1ì¸ ì „ìš© ì›¹ ëŒ€ì‹œë³´ë“œ** êµ¬ì¶•
-   **í•µì‹¬ ì² í•™**: "ê°(Feeling)ì´ ì•„ë‹Œ ë°ì´í„°(Data)ì— ê¸°ë°˜í•œ ì²´ê³„ì ì¸ í›ˆë ¨ê³¼ ë¶€ìƒ ë°©ì§€"
-   **íƒ€ê²Ÿ ìœ ì €**: ê°œë°œì ë³¸ì¸ (Single User)

## 2. ê¸°ìˆ  ìŠ¤íƒ

-   **í”„ë ˆì„ì›Œí¬**: Next.js 14+ (App Router)
-   **ì–¸ì–´**: TypeScript
-   **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS, shadcn/ui (UI ì»´í¬ë„ŒíŠ¸)
-   **ìƒíƒœ ê´€ë¦¬**: SWR ë˜ëŠ” React Query (ë°ì´í„° ìºì‹± ë° íŒ¨ì¹­)
-   **ì‹œê°í™”**: Recharts (ì°¨íŠ¸ êµ¬í˜„), date-fns (ë‚ ì§œ ì²˜ë¦¬)
-   **ë°ì´í„° ì†ŒìŠ¤**: Strava API v3 (REST)
-   **ë°°í¬**: Vercel (Free Tier)
-   **ì €ì¥ì†Œ**: ë¡œì»¬ JSON íŒŒì¼ (í›ˆë ¨ ìŠ¤ì¼€ì¤„ ê´€ë¦¬), ì¸ë©”ëª¨ë¦¬/í™˜ê²½ë³€ìˆ˜ (í† í° ê´€ë¦¬)

## 3. ë°ì´í„° ì•„í‚¤í…ì²˜ ë° ì¸ì¦

### ì¸ì¦ ì „ëµ (Single User OAuth)

ì´ ì•±ì€ ë‹¤ìˆ˜ íšŒì›ì´ ì•„ë‹Œ **ë‹¨ í•œ ëª…(ë‚˜)**ì„ ìœ„í•´ ì‘ë™í•˜ë¯€ë¡œ ë³µì¡í•œ DB ì„¸ì…˜ ê´€ë¦¬ê°€ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.

1. **ì´ˆê¸° ì„¤ì •**: ê°œë°œìê°€ ë¡œì»¬ì—ì„œ ìµœì´ˆ 1íšŒ ì¸ì¦ì„ í†µí•´ `Refresh Token`ì„ íšë“í•©ë‹ˆë‹¤.
2. **í™˜ê²½ ë³€ìˆ˜:** íšë“í•œ `CLIENT_ID`, `CLIENT_SECRET`, `REFRESH_TOKEN`ì„ `.env.local` ë° Vercel í™˜ê²½ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
3. **Token Rotation (í•µì‹¬):**
    - ì•± ì‹¤í–‰ ì‹œ(ë˜ëŠ” API í˜¸ì¶œ ì „), ì„œë²„ ì‚¬ì´ë“œì—ì„œ `Refresh Token`ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ `Access Token`ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
    - ì´ ê³¼ì •ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™í™”ë˜ì–´ì•¼ í•˜ë©°, ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ ê³¼ì •ì„ ê±°ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

## 4. í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸

1.  **Strava API:**
    -   ì—”ë“œí¬ì¸íŠ¸: `/athlete/activities`
    -   í•„í„°ë§ ì¡°ê±´: `type === 'Run'` (ì˜¤ì§ ë‹¬ë¦¬ê¸° ë°ì´í„°ë§Œ ì·¨ê¸‰)
2.  **Local Config (`/data`):**
    -   `schedule.json`: ì‚¬ìš©ìê°€ ìˆ˜ë¦½í•œ í›ˆë ¨ ê³„íš ë°ì´í„°.
    -   `user-profile.json`: ìµœëŒ€ ì‹¬ë°•ìˆ˜(Max HR), ì•ˆì •ì‹œ ì‹¬ë°•ìˆ˜(Rest HR) ë“± ìƒìˆ˜ ê°’.

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸ (Feature Specifications)

### Phase 1: Dashboard (Status & Safety)

ì§ê´€ì ì¸ í˜„ì¬ ìƒíƒœ íŒŒì•…ê³¼ ë¶€ìƒ ë°©ì§€ ëª¨ë‹ˆí„°ë§.

1.  **ì£¼ê°„ ë§ˆì¼ë¦¬ì§€ ì°¨íŠ¸ (Weekly Mileage)**
    -   **UI:** ë§‰ëŒ€ ê·¸ë˜í”„ (Bar Chart, ìµœê·¼ 12ì£¼).
    -   **ê¸°ëŠ¥:** ì£¼ ë‹¨ìœ„ ê±°ë¦¬ í•©ì‚° í‘œì‹œ, ëª©í‘œ ê±°ë¦¬(Goal Line) ëŒ€ë¹„ ë‹¬ì„±ë¥  ì‹œê°í™”.
2.  **ACWR (Acute:Chronic Workload Ratio)**
    -   **ëª©ì :** ë¶€ìƒ ìœ„í—˜ë„ ê´€ë¦¬.
    -   **ë¡œì§:**
        -   `Acute Load` = ìµœê·¼ 7ì¼ê°„ì˜ ì£¼í–‰ ê±°ë¦¬ í•©.
        -   `Chronic Load` = ìµœê·¼ 28ì¼ê°„ì˜ ì£¼í–‰ ê±°ë¦¬ í•© / 4.
        -   `Ratio` = Acute / Chronic.
    -   **UI:** Gauge Chart.
        -   **Green (0.8 ~ 1.3):** ì ì • (Sweet Spot).
        -   **Yellow (1.3 ~ 1.5):** ì£¼ì˜ (Caution).
        -   **Red (> 1.5):** ìœ„í—˜ (Danger).

### Phase 2: The Lab (Performance & Insights)

ìŠ¤íŠ¸ë¼ë°”ê°€ ì œê³µí•˜ì§€ ì•ŠëŠ” ì „ë¬¸ì ì¸ ë¶„ì„ ì§€í‘œ ì œê³µ.

1.  **VDOT ê³„ì‚°ê¸° (Auto-Calculation)**
    -   **ë¡œì§:** ìµœê·¼ 4ì£¼ í™œë™ ì¤‘ 'ìµœê³ ì˜ í¼í¬ë¨¼ìŠ¤(Best Effort)'ë¥¼ ìë™ ì¶”ì¶œí•˜ì—¬ Jack Daniels VDOT ê³µì‹ì— ëŒ€ì….
    -   **ì¶œë ¥:** í˜„ì¬ ë‚˜ì˜ VDOT ì ìˆ˜ (ì˜ˆ: 48).
2.  **í›ˆë ¨ í˜ì´ìŠ¤ ê°€ì´ë“œ (Training Paces)**
    -   **ê¸°ëŠ¥:** ì‚°ì¶œëœ VDOT ì ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 5ê°€ì§€ í›ˆë ¨ í˜ì´ìŠ¤ ìë™ ê³„ì‚° ë° í‘œì¶œ.
    -   **êµ¬ì„±:** E(Easy), M(Marathon), T(Threshold), I(Interval), R(Repetition).
3.  **ëŒ€íšŒ ê¸°ë¡ ì˜ˆì¸¡ (Race Predictor)**
    -   **ë¡œì§:** Riegel's Formula ì ìš©.
    -   **ì¶œë ¥:** 5k, 10k, Half, Full ì˜ˆìƒ ì™„ì£¼ ì‹œê°„.

### Phase 3: Scheduler (Plan vs Actual)

ê³„íšëœ í›ˆë ¨ê³¼ ì‹¤ì œ ìˆ˜í–‰ ì—¬ë¶€ë¥¼ ë¹„êµ.

1.  **í›ˆë ¨ ìº˜ë¦°ë” (Training Calendar)**
    -   **UI:** ì›”ê°„ ë‹¬ë ¥ (Month View).
    -   **ë¡œì§:** `schedule.json`ì˜ ë‚ ì§œì™€ APIì˜ í™œë™ ë‚ ì§œë¥¼ ë§¤ì¹­.
    -   **ìƒíƒœ í‘œì‹œ:**
        -   âœ… **Success:** ê³„íš ìˆìŒ & ìˆ˜í–‰ ì™„ë£Œ.
        -   âš ï¸ **Missed:** ê³„íš ìˆìŒ & ìˆ˜í–‰ ì•ˆ í•¨.
        -   ğŸŒŸ **Bonus:** ê³„íš ì—†ìŒ & ìˆ˜í–‰ í•¨.
2.  **TRIMP (Training Impulse)**
    -   **ëª©ì :** ìŠ¤íŠ¸ë¼ë°”ì˜ 'Relative Effort' ëŒ€ì²´.
    -   **ë¡œì§:** ì‹¬ë°•ìˆ˜ ê¸°ë°˜ í›ˆë ¨ ë¶€í•˜ ê³„ì‚° (ê³µì‹ ì°¸ì¡°).
    -   **UI:** í™œë™ ì¹´ë“œì— TRIMP ì ìˆ˜ í‘œì‹œ.

---

## 5. ì£¼ìš” ì•Œê³ ë¦¬ì¦˜ ë° ê³µì‹ (Algorithms)

### A. Riegel's Formula (ê¸°ë¡ ì˜ˆì¸¡)

```typescript
// t1: ê¸°ì¤€ ê¸°ë¡(ë¶„), d1: ê¸°ì¤€ ê±°ë¦¬, d2: ëª©í‘œ ê±°ë¦¬
const predictTime = (t1: number, d1: number, d2: number) => {
    return t1 * Math.pow(d2 / d1, 1.06);
};
```

### B. TRIMP (í›ˆë ¨ ë¶€í•˜)

```typescript
// HRr (ì‹¬ë°• ì˜ˆë¹„ìœ¨) = (AvgHR - RestHR) / (MaxHR - RestHR)
// Duration: ìš´ë™ ì‹œê°„(ë¶„)
const calculateTRIMP = (duration: number, hrReserve: number) => {
    return duration * hrReserve * 0.64 * Math.exp(1.92 * hrReserve);
};
```

### C. ACWR (ë¶€ìƒ ë°©ì§€ ë¹„ìœ¨)

```typescript
const acuteLoad = sumLast7DaysDistance;
const chronicLoad = sumLast28DaysDistance / 4;
const acwr = acuteLoad / chronicLoad;
```

---

## 6. ê°œë°œ ë¡œë“œë§µ (Development Roadmap)

### Step 1: í™˜ê²½ ì„¤ì • ë° ì¸ì¦ (Foundation)

-   [ ] Next.js í”„ë¡œì íŠ¸ ìƒì„± (Tailwind, TypeScript).
-   [ ] Strava API Application ë“±ë¡ ë° Key ë°œê¸‰.
-   [ ] **Auth Handler êµ¬í˜„:** `/api/auth/refresh` ë¼ìš°íŠ¸ ìƒì„± (í† í° ê°±ì‹  ë¡œì§).
-   [ ] ê¸°ë³¸ API Fetcher êµ¬í˜„ (Headerì— Bearer Token ìë™ ì‚½ì…).

### Step 2: ì½”ì–´ ë¡œì§ êµ¬í˜„ (Logic)

-   [ ] `utils/calculations.ts` ìƒì„±: VDOT, TRIMP, ACWR, Riegel ê³µì‹ êµ¬í˜„.
-   [ ] `utils/strava.ts` ìƒì„±: í™œë™ ë°ì´í„° í•„í„°ë§(Run only), ë°ì´í„° ê°€ê³µ í•¨ìˆ˜ êµ¬í˜„.
-   [ ] `data/schedule.json` ë”ë¯¸ ë°ì´í„° êµ¬ì¡° ì„¤ê³„.

### Step 3: UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ (Visualization)

-   [ ] **Dashboard:** Rechartsë¥¼ ì´ìš©í•œ ì£¼ê°„ ë§ˆì¼ë¦¬ì§€, ACWR ê²Œì´ì§€ ì»´í¬ë„ŒíŠ¸.
-   [ ] **The Lab:** VDOT ì ìˆ˜ í‘œì‹œ ì¹´ë“œ, í˜ì´ìŠ¤ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸.
-   [ ] **Calendar:** ë‹¬ë ¥ ê·¸ë¦¬ë“œ êµ¬í˜„ ë° ë°ì´í„° ë§¤í•‘ ë¡œì§.

### Step 4: í†µí•© ë° ë°°í¬ (Integration)

-   [ ] ë©”ì¸ í˜ì´ì§€(`page.tsx`) ì¡°ë¦½.
-   [ ] ë°˜ì‘í˜• ë””ìì¸(Mobile) ì ê²€.
-   [ ] Vercel ë°°í¬ ë° í™˜ê²½ë³€ìˆ˜ ì„¤ì •.

---

## 7. ë””ë ‰í† ë¦¬ êµ¬ì¡° ì œì•ˆ (Directory Structure)

```bash
/app
  /api
    /strava          # Strava API Proxy (í† í° ê°±ì‹  í¬í•¨)
      route.ts
  /components
    /charts          # Recharts ì»´í¬ë„ŒíŠ¸
    /dashboard       # ìš”ì•½ ì¹´ë“œ, ACWR ê²Œì´ì§€
    /lab             # VDOT ê³„ì‚°ê¸°, í˜ì´ìŠ¤ í…Œì´ë¸”
    /calendar        # í›ˆë ¨ ìº˜ë¦°ë”
  page.tsx           # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
/lib
  strava-api.ts      # Fetcher, Auth Logic
  formulas.ts        # VDOT, TRIMP, ACWR ê³µì‹
  utils.ts           # ë‚ ì§œ í¬ë§·íŒ… ë“±
/data
  schedule.json      # í›ˆë ¨ ê³„íš (JSON ê´€ë¦¬)
  user-config.json   # ì‹ ì²´ ì •ë³´ (HR Max ë“±)
.env.local           # STRAVA_CLIENT_ID, SECRET, REFRESH_TOKEN
```
